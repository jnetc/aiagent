<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= title %>
  </title>
  <link rel="stylesheet" href="/static/css/global.css">
  <link rel="stylesheet" href="/static/css/error.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="/" class="nav-brand">
        <i class="fas fa-robot"></i>
        Zora AI Agent
      </a>

      <div class="nav-menu">
        <a href="/" class="nav-link">Home</a>
        <a href="/pricing" class="nav-link">Pricing</a>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <div class="error-container">
      <div class="error-card error-<%= statusCode %>">
        <div class="error-icon">
          <% if (statusCode===404) { %>
            <i class="fas fa-search"></i>
            <% } else if (statusCode===403) { %>
              <i class="fas fa-lock"></i>
              <% } else if (statusCode===500) { %>
                <i class="fas fa-server"></i>
                <% } else { %>
                  <i class="fas fa-exclamation-triangle"></i>
                  <% } %>
        </div>

        <h1>Error <%= statusCode %>
        </h1>

        <p class="error-message">
          <% if (statusCode===404) { %>
            The page you're looking for doesn't exist or has been moved.
            <% } else if (statusCode===403) { %>
              You don't have permission to access this resource.
              <% } else if (statusCode===500) { %>
                Something went wrong on our server. We're working to fix it!
                <% } else { %>
                  <%= message %>
                    <% } %>
        </p>

        <div class="error-actions">
          <a href="/" class="btn btn-primary">
            <i class="fas fa-home"></i> Go Home
          </a>
          <button onclick="history.back()" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Go Back
          </button>
          <% if (statusCode===500) { %>
            <button onclick="window.location.reload()" class="btn btn-outline">
              <i class="fas fa-redo"></i> Try Again
            </button>
            <% } %>
        </div>

        <% if (stack && process.env.NODE_ENV==='development' ) { %>
          <details class="error-details">
            <summary>
              <i class="fas fa-bug"></i> Error Details (Development Mode)
            </summary>
            <pre><%= stack %></pre>
          </details>
          <% } %>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-container">
      <p>&copy; 2024 Zora AI Agent. Powered by AI for NFT Analytics.</p>
      <div class="footer-links">
        <a href="/pricing">Pricing</a>
        <a href="https://twitter.com/zoraaiagent" target="_blank">Twitter</a>
        <a href="https://discord.gg/zoraai" target="_blank">Discord</a>
      </div>
    </div>
  </footer>

  <script>
    // Auto-refresh for 500 errors after 10 seconds
    if (statusCode === 500) {
      setTimeout(function () {
        const refreshBtn = document.createElement('div');
        refreshBtn.style.cssText = 'position: fixed; bottom: 20px; right: 20px; background: var(--primary-color); color: white; padding: 1rem; border-radius: 0.5rem; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000;';
        refreshBtn.innerHTML = '<i class="fas fa-redo"></i> Auto-refresh in 5s...';
        document.body.appendChild(refreshBtn);

        let countdown = 5;
        const interval = setInterval(function () {
          countdown--;
          refreshBtn.innerHTML = '<i class="fas fa-redo"></i> Auto-refresh in ' + countdown + 's...';
          if (countdown <= 0) {
            window.location.reload();
          }
        }, 1000);

        refreshBtn.onclick = function () {
          clearInterval(interval);
          window.location.reload();
        };
      }, 10000);
    }
  </script>
</body>

</html>
